\documentclass[main.tex]{subfiles}

\begin{document}

\section{Introduktion}
En replikation av miniräknaren TI-83 Plus har implementerats i det
hårdvarubeskrivande språket VHDL. Designen har sedan programmerats till en
Spartan-6-FPGA på ett Nexys3-kort kopplat till ett tangentbord och en VGA-skärm
som emulerar miniräknarens gränssnitt. Minnet från en miniräknare har överförts
till minnet på Nexys3-kortet och på så sätt har operativsystemet och diverse
spel kunnat köras utan några upptäckta problem.

\subsection{Bakgrund}
Projektet har utförts av en grupp på fyra studenter som ett delmoment av kursen
TSEA83 på Linköpings universitet under större delen av vårterminen 2018. Alla
gruppmedlemmar har sedan tidigare läst två förebyggande kurser; digitalteknik,
TSEA22 och datorteknik, TSEA82. Som projekt i TSEA83 eftersökte gruppen att
bygga en existerande allmän processor som kunde köra tidigare skrivna program.
Gruppen var sedan tidigare väl bekanta med miniräknaren TI-84 Plus som använder
sig av en välkänd processor från 70-talet; Zilog Z80. En replikation av
processorn valdes som projektets minimala mål och TI-84-miniräknaren valdes som
projektets önskvärda mål. Under projektets gång upptäcktes det att en annan
miniräknare, TI-83p hade färre hårdvarukomponenter men nästan identisk funktion
vilket ledde till att den implementerades istället.

\subsection{Syfte}
Syftet med konstruktionen var inlärning av kunskap om hur processorer fungerar
och att få en inblick i hur uppbyggnaden av en dator kan se ut. Målet var att
skapa en Z80-processor som därefter kunde användas för bygga en TI-miniräknare.

\subsection{Referenser och resurser}
För att förstå hur Z80:n är uppbyggd och hur den fungerar har boken {\it
Programming the Z80}\cite{zaks-z80prog} av Rodnay Zaks varit till väldigt stor
nytta. Särskilt kapitel två om processorns organisation. Flera artiklar av Ken
Shirriff såsom {\it How the Z80's registers are implemented}\cite{shirriff-reg}
har också varit till stor hjälp. Zilog:s användarmanual\cite{z80um} har använts
väl som referens för hur instruktioner, avbrott och flaggor ska fungera.
Tidsdiagrammen har även använts som bas för implementationen. En tabell från
ClrHome\cite{clrhome} har använts mycket som snabb referens för alla
instruktioners objektkoder.

För att förstå hur TI-miniräknarna fungerar har sidor som {\it Z80
Heaven}\cite{z80heaven} och {\it WikiTI}\cite{wikiti} använts. Sidorna om
miniräknarens portar på WikiTI har varit väldigt användbara för att lista ut
hur miniräknarens komponenter ska fungera. Källkoden för emulatorer har också
varit väldigt användbara för detta syfte. Specifikt har koden till {\it
z80e}\cite{z80e} och {\it Tilem2}\cite{tilem2} granskats väl.

Emulatorerna har även använts för att jämföra resultatet med implementationen.
Tilem2 har en väldigt användbar debugger som gjorde att en fungerande version
kunde köras parallellt med projektet instruktion för instruktion. Det här var
oerhört hjälpsamt i slutet av projektet för att hitta de sista felen och
slutligen få operativsystemet att fungera felfritt.

För att skriva kod till processorn har program skrivits med hjälp av
textredigerare och därefter assemblats till objektkod med {\it
z80asm}\cite{z80asm}. {\it GHDL}\cite{ghdl} tillsammans med {\it
GTKWave}\cite{gtkwave} har använts för att simulera VHDL-kod och visa
vågdiagram.

Verktyg från {\it Xilinx ISE Design Suite} har använts för att syntetisera och
implementera VHDL-koden till en bitfil som kan programmeras till FPGA:n med
{\it Digilent Adept}. Adept har även använts för att skicka TI-83p-ROM:en och
andra program direkt till minnet på FPGA-kortet.  TI-83p-ROM:en har laddats
från en TI-83p-miniräknare. Program och spel för miniräknaren har hämtats från
{\it ticalc.org}:s filarkiv\cite{ticalc}.

\end{document}
